void I2C_Init(void) {
    // Enable the clock for GPIOB
    RCC->APB2ENR |= RCC_APB2ENR_IOPBEN;

    // Configure PB10 (SCL) and PB11 (SDA) as alternate function open-drain
    GPIOB->CRH &= ~(GPIO_CRH_MODE10 | GPIO_CRH_CNF10 | GPIO_CRH_MODE11 | GPIO_CRH_CNF11);
    GPIOB->CRH |= GPIO_CRH_MODE10_1 | GPIO_CRH_MODE11_1 | GPIO_CRH_CNF10_1 | GPIO_CRH_CNF11_1;

    // Enable the clock for I2C1
    RCC->APB1ENR |= RCC_APB1ENR_I2C1EN;

    // Configure I2C1
    I2C1->CR1 = 0; // Disable I2C1 during configuration

    // Configure clock control registers
    I2C1->CR2 = SystemCoreClock / 1000000; // Assuming 1MHz, adjust based on your I2C device specifications
    I2C1->CCR = (SystemCoreClock / (2 * 100000)) & 0xFFF; // Assuming 100kHz, adjust accordingly
    I2C1->TRISE = SystemCoreClock / 1000000 + 1; // Adjust based on your I2C device specifications

    // Enable I2C1
    I2C1->CR1 |= I2C_CR1_PE;
}